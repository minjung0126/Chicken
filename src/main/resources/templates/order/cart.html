<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0"/>

  <title>chicken stock</title>
  <!-- common css -->
  <link rel="stylesheet" type="text/css" th:href="@{/css/common/common.css}"/>
  <!-- cart css -->
  <link rel="stylesheet" type="text/css" th:href="@{/css/order/cart.css}">

  <!-- table css -->
  <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
  <link rel="stylesheet" type="text/css" th:href="@{/css/common/style.css}"/>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

  <script src="https://code.jquery.com/jquery-3.6.0.js"></script>
  <script th:src="@{/js/common.js}"></script>

  <!-- font awesome -->
  <script src="https://kit.fontawesome.com/da4b1b94bb.js" crossorigin="anonymous"></script>

</head>
<body>
  <div class="wrap">

    <!-- header -->
    <div th:include="common/userHeader.html"></div>

    <!-- S: container -->
    <div class="container px-0">

      <!-- S: aside -->
      <div th:replace="common/userSidebar.html"></div>
      <!-- E: aside -->

      <!-- S: main layout -->
      <div class="main_layout">
        <div class="main_layout_inner">

          <!-- 작업 영역 -->
          <!-- S: table -->
          <div class="container-fluid" style="margin-top:30px">
            <h3><i class="fa-solid fa-cart-shopping"></i> 장바구니</h3>
			      <br>
            <div class="input-group mb-5 col-12">
              <div class="dateList1"> 입고 예정일 : 
                <span id="dueDate">입고예정</span>
              </div>
              <div class="dateList2"> 발주 마감일 : 
                <span id="deadline">마감일</span>
              </div>
              <div class="dateList3" style="font-weight: bold;"> 현재 시각 : 
                <span id="clock">현재시각</span>
              </div>

              <div class="balanceBox" style="font-weight: bold;">
                <div id="balance">가용 금액 : <p class="money">1,000,000원</p></div>
                <div id="devide">|</div>
                <div id="cartAmount">장바구니 : <p class="money">180,000 원</p></div>
              </div>

          <div class="search-area">
              <input type="hidden" name="currentPage" value="1"/>
              <select id="searchCondition" name="searchCondition" style="text-align: center;">
                <option>== 선택 ==</option>
                <option value="itemName">상품명</option>
                <option value="category">카테고리</option>
              </select>
              <input class="form-control" type="search" id="searchValue" name="searchValue" placeholder="검색 내용을 입력해주세요.">
              <button class="btn btn-warning" type="submit" style="color:#fff" id="searchBtn">검색</button>
          </div>

            <div id="itemCondition">
              <p>품절 상품 제외</p>
            </div>

              <div id="addProduct">
                <button class="btn btn-warning" style="color:#fff" onclick="linkToOrder()"><i class="fa-solid fa-magnifying-glass"></i> 제품 추가</button>
              </div>

              <div id="order">
                <button class="btn btn-warning" type="submit" style="color:#fff" onclick="orderConfirm()">주문하기</button>
              </div>
            </div>

            <table class="table">
              <thead>
                <tr>
                  <th style="width: 90px;">상품코드</th>
                  <th style="width: 110px;">썸네일</th>
                  <th style="width: 150px;">상품명</th>
                  <th style="width: 150px;">카테고리</th>
                  <th style="width: 60px;">규격</th>
                  <th style="width: 100px;">제조사</th>
                  <th style="width: 100px;">판매가격</th>
                  <th style="width: 100px;">재고량</th>
                  <th style="width: 100px;">수량</th>
                  <th style="width: 90px;">품절여부</th>
                  <th>수정</th>
                </tr>
              </thead>
              <tbody>
              <tr th:each="cart : ${ cartList }">
                <td th:text="${ cart.itemNo }">상품코드</td>
                <td>
                  <div class="img-info">
                    <div class="img-info__img">
                      <img src="../assets/images/chicken.jpg" alt="">
                    </div>
                  </div>
                </td>
                <input type="hidden" th:value="${ cart.categoryNo }"/>
                <input type="hidden" th:value="${ interYn }"/>
                <td th:text="${ cart.itemName }">상품명</td>
                <td th:text="${ cart.categoryName }">카테고리</td>
                <td th:text="${ cart.itemStandard }">규격</td>
                <td th:text="${ cart.itemMake }">제조사(원산지)</td>
                <td th:text="${ cart.itemSales }">판매가격</td>
                <td th:text="${ cart.storeAmount }">재고량</td>
                <td th:text="${ cart.cartAmount }">수량</td>
                <td th:text="${ cart.itemSoldoutYn }">품절여부</td>
                <td>
                  <div class="dropdown open">
                    <a href="javascript:void(0);" class="px-2" id="triggerId1" data-toggle="dropdown" aria-haspopup="true"
                       aria-expanded="false">
                      <i class="fa fa-ellipsis-v"></i>
                    </a>
                    <div class="dropdown-menu" aria-labelledby="triggerId1">
                      <!-- <a class="dropdown-item" href="#"><i class="fa fa-eye mr-1"></i>View</a> -->
                      <a class="dropdown-item" href="#" onclick="interest()"><i class="fa-solid fa-heart-circle-plus"></i> 수정하기</a>
                      <a class="dropdown-item text-danger" href="#"><i class="fa fa-trash mr-1"></i> Delete</a>
                    </div>
                  </div>
                </td>
              </tr>
              </tbody>
            </table>
          </div>
          <!-- E: table -->
          <!-- S: paging -->
          <div class="d-flex justify-content-center" id="pageBox">
            <button class="btn btn-light"
                    th:onclick="'location.href=\'/order/cart/list?currentPage='+ @{${selectCriteria.startPage}} + '\''"
                    th:disabled="${selectCriteria.pageNo == 1}"><<</button>

            <button class="btn btn-light mx-1"
                    th:onclick="'location.href=\'/order/cart/list?currentPage='+ @{${selectCriteria.pageNo - 1}} + '\''"
                    th:disabled="${selectCriteria.pageNo == 1}"><</button>

            <th:block th:each="page : ${#numbers.sequence(selectCriteria.startPage, selectCriteria.endPage)}">
              <button class="btn btn-warning mx-1" disabled style="color:white"
                      th:text="${ page }"
                      th:onclick="'location.href=\'/order/cart/list?currentPage='+ @{${page}} + '\''"
                      th:disabled="${ selectCriteria.pageNo eq page }"></button>
            </th:block>

            <button class="btn btn-light mx-1"
                    th:onclick="'location.href=\'/order/cart/list?currentPage='+ @{${selectCriteria.pageNo + 1}} + '\''"
                    th:disabled="${selectCriteria.pageNo == selectCriteria.maxPage}">></button>

            <button class="btn btn-light"
                    th:onclick="'location.href=\'/order/cart/list?currentPage='+ @{${selectCriteria.maxPage}} + '\''"
                    th:disabled="${selectCriteria.pageNo == selectCriteria.maxPage}">>></button>
          </div>
          <!-- E: paging -->
        </div>
      </div>
      <!-- E: main layout -->
    </div>
    <!-- E: container -->
  </div>
  <!-- table js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>

  
  <!-- 입고 예정일 -->
  <script th:inline="javascript">
    var dueDateTest = document.getElementById("dueDate");
    function dueDate() {
      var date = new Date();
      var year = date.getFullYear();
      var month = date.getMonth();
      var clockDate = date.getDate();
      var day = date.getDay();
      var week = ['일', '월', '화', '수', '목', '금', '토'];

      dueDateTest.innerText = `${year}년 ${month+1}월 ${clockDate+1}일 ${week[day+1]}요일`;
    }

    dueDate();
  </script>

  <!-- 발주 마감일 -->
  <script th:inline="javascript">
    var deadlineTest = document.getElementById("deadline");
    function deadline() {
      var date = new Date();
      var year = date.getFullYear();
      var month = date.getMonth();
      var clockDate = date.getDate();
      var day = date.getDay();
      var week = ['일', '월', '화', '수', '목', '금', '토'];

      deadlineTest.innerText = `${year}년 ${month+1}월 ${clockDate}일 ${week[day]}요일 23시 59분 59초`;
    }

    deadline();
  </script>

  <!-- 현재 시각 -->
  <script th:inline="javascript">
    var clockTarget = document.getElementById("clock");
    function clock() {
      document.getElementById("clock").style.fontWeight="bold";
      var date = new Date();
      var year = date.getFullYear();  
      var month = date.getMonth();
      var clockDate = date.getDate();
      var day = date.getDay();
      var week = ['일', '월', '화', '수', '목', '금', '토'];
      var hours = date.getHours();
      var minutes = date.getMinutes();
      var seconds = date.getSeconds();

      clockTarget.innerText = `${year}년 ${month+1}월 ${clockDate}일 ${week[day]}요일` +
      ` ${hours < 10 ? `0${hours}` : hours}시 ${minutes < 10 ? `0${minutes }` : minutes }분 ${seconds < 10 ? `0${seconds }` : seconds }초`;
}
    function init() {
      clock();
      setInterval(clock, 1000);
    }

    init();
  </script>

  <!-- 장바구니 상품 주문 -->
  <script th:inline="javascript">
    function orderConfirm() {
      var result = confirm("선택 제품을 주문하시겠습니까?\n총 금액 : 180,000원\n총 수량 : 30\n가용 금액 : 1,000,000원\n예상 잔액 : 820,000원");
      if(result == true) {
        location = url;
      }
    }
  </script>

  <!-- 수량 변경 -->
  <script th:inline="javascript">
    function reviseAmount() {
        let amount = prompt("변경하실 수량을 입력해주세요.");

        if (amount == null || amount == "") {
            alert("수량을 확인 후 다시 입력해주세요.");
        } else {
            alert("해당 상품의 수량이 " + amount + "(으)로 변경되었습니다.");
        }
    }
  </script>

  <!-- 장바구니 품목 삭제 -->
  <script th:inline="javascript">
    function deleteConfirm() {
        var result = confirm("선택 제품을 장바구니에서 삭제하시겠습니까?");
        if(result == true) {
            alert("선택 제품이 장바구니에서 삭제되었습니다.");
        }
    }
  </script>

  <!-- 체크 박스 전체 선택 -->
  <script th:inline="javascript">
    function selectAll(selectAll)  {
        const checkboxes = document.getElementsByName('option');
    
        checkboxes.forEach((checkbox) => {
        checkbox.checked = selectAll.checked;
        })
    }
  </script>

  <!-- 상품 조회 페이지로 연결 -->
  <script th:inline="javascript">
    function linkToOrder() {
      url.href = 'order.html'
    }
  </script>


</body>
</html>