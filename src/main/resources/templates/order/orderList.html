<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0"/>

  <title>chicken stock</title>
  <!-- common css -->
  <link rel="stylesheet" type="text/css" th:href="@{/css/common/common.css}"/>

  <!-- order css -->
  <link rel="stylesheet" type="text/css" th:href="@{/css/order/inquire.css}">

  <!-- table css -->
    <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
	<link rel="stylesheet" type="text/css" th:href="@{/css/common/style.css}">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

  <script src="https://code.jquery.com/jquery-3.6.0.js"></script>
  <script src="/js/common.js"></script>

  <!-- font awesome -->
  <script src="https://kit.fontawesome.com/da4b1b94bb.js" crossorigin="anonymous"></script>


</head>
<body>
  <div class="wrap">

    <!-- header -->
    <div th:include="common/userHeader.html"></div>

    <!-- S: container -->
    <div class="container px-0">

      <!-- S: aside -->
      <div th:replace="common/userSidebar.html"></div>
      <!-- E: aside -->

      <!-- S: main layout -->
      <div class="main_layout">
        <div class="main_layout_inner">

          <!-- 작업 영역 -->
          <!-- S: table -->
          <div class="container-fluid" style="margin-top:30px">
            <h3><i class="fa-solid fa-magnifying-glass"></i> 상품 조회</h3>
			      <br>

            <div class="input-group mb-3 col-12">
              <div class="dateList1"> 입고 예정일 : 
                <span id="dueDate">입고예정</span>
              </div>
              <div class="dateList2"> 발주 마감일 : 
                <span id="deadline">마감일</span>
              </div>
              <div class="dateList3" style="font-weight: bold;"> 현재 시각 : 
                <span id="clock">현재시각</span>
              </div>

              <div class="search-area">
                <form id="searchForm" th:align="center"
                      th:action="@{/order/list}"
                      method="get"
                      style="display: inline-block">

                  <input type="hidden" name="currentPage" value="1">
                  <select id="searchCondition" name="searchCondition" style="text-align: center;">
                    <option>== 선택 ==</option>
                    <option value="itemName">상품명</option>
                    <option value="category">카테고리</option>
                  </select>
                  <input class="form-control" type="search" id="searchValue" name="searchValue" placeholder="검색 내용을 입력해주세요.">
                  <button class="btn btn-warning" type="submit"style="color:#fff">검색</button>
                </form>
              </div>

              <div id="checkBox">
                <label><input type="checkbox" name="available" value="available"> 품절 상품 제외</label>
                <label><input type="checkbox" name="interest" value="interest"> 관심 상품만</label>
              </div>

              <div id="cart">
                <button class="btn btn-warning" type="submit" style="color:#fff" onclick="cartAlert()">선택 담기</button>
              </div>

            </div>

            <table class="table">
              <thead>
                <tr>
                  <th>
                    <div class="form-check pb-3">
                      <input type="checkbox" class="form-check-input" name="option" value='selectall' onclick='selectAll(this)' required/>
                    </div>
                  </th>
                  <th class="col-1">번호</th>
                  <th class="col-1">상품코드</th>
                  <th class="col-1">썸네일</th>
                  <th class="col-2">상품명</th>
                  <th class="col-2">카테고리</th>
                  <th class="col-1">규격</th>
                  <th class="col-1">제조사</th>
                  <th class="col-1">판매가격</th>
                  <th class="col-1">재고량</th>
                  <th>수량</th>
                  <th class="col-2">품절여부</th>
                  <th class="col-1">관심등록</th>
                </tr>
              </thead>
              <tbody>
                <tr th:each="order : ${ orderList }">
                  <td>
                    <div class="form-check">
                      <input type="checkbox" class="form-check-input" id="check" name="option" value="something">
                      <label class="form-check-label" for="check"></label>
                    </div>
                  </td>
                  <td>1</td>
                  <td th:text="${ order.itemNo }">상품코드</td>
                  <td>썸네일</td>
                  <td th:text="${ order.itemName }">상품명</td>
                  <td th:text="${ order.categoryName }">카테고리</td>
                  <td th:text="${ order.itemStandard }">규격</td>
                  <td th:text="${ order.itemMake }">제조사(원산지)</td>
                  <td th:text="${ order.itemSales }">판매가격</td>
                  <td th:text="${ order.storeAmount }">재고량</td>
                  <td><input type="text" id="amount" name="amount" size="6" placeholder="입력" oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');"></td>
                  <td th:text="${ order.itemSoldoutYn }">품절여부</td>
                  <td>
                    <div class="dropdown open">
                      <a href="#" class="px-2" id="triggerId1" data-toggle="dropdown" aria-haspopup="true"
                          aria-expanded="false">
                            <i class="fa fa-ellipsis-v"></i>
                      </a>
                      <div class="dropdown-menu" aria-labelledby="triggerId1">
                        <!-- <a class="dropdown-item" href="#"><i class="fa fa-eye mr-1"></i>View</a> -->
                        <a class="dropdown-item" href="#" onclick="interest()"><i class="fa-solid fa-heart-circle-plus"></i> 관심 등록</a>
                        <a class="dropdown-item text-danger" href="#"><i class="fa fa-trash mr-1"></i> Delete</a>
                      </div>
                    </div>
                  </td>
                </tr>
              </tbody>
            </table>

          </div>
          <!-- E: table -->
          <!-- S: paging -->

          <div class="d-flex justify-content-center">
            <button class="btn btn-light"
                    th:onclick="'location.href=\'/order/list?currentPage='+ @{${selectCriteria.startPage}} + '\''"
                    th:disabled="${selectCriteria.pageNo == 1}"><<</button>

            <button class="btn btn-light mx-1"
                    th:onclick="'location.href=\'/order/list?currentPage='+ @{${selectCriteria.pageNo - 1}} + '\''"
                    th:disabled="${selectCriteria.pageNo == 1}"><</button>

            <th:block th:each="page : ${#numbers.sequence(selectCriteria.startPage, selectCriteria.endPage)}">
              <button class="btn btn-warning mx-1" disabled style="color:white"
                      th:text="${ page }"
                      th:onclick="'location.href=\'/order/list?currentPage='+ @{${page}} + '\''"
                      th:disabled="${ selectCriteria.pageNo eq page }"></button>
            </th:block>

            <button class="btn btn-light mx-1"
                    th:onclick="'location.href=\'/order/list?currentPage='+ @{${selectCriteria.pageNo + 1}} + '\''"
                    th:disabled="${selectCriteria.pageNo == selectCriteria.maxPage}">></button>

            <button class="btn btn-light"
                    th:onclick="'location.href=\'/order/list?currentPage='+ @{${selectCriteria.maxPage}} + '\''"
                    th:disabled="${selectCriteria.pageNo == selectCriteria.maxPage}">>></button>
          </div>


            <!--
            <button class="btn btn-light" id="idStartPage"
                    th:onclick="'location.href=\'/order/list?currentPage='+ @{${selectCriteria.startPage}} + '\''"
                    th:disabled="${selectCriteria.pageNo == 1}"><<</button>

            <button type="button" class="btn btn-light mx-1"
                    th:onclick="'location.href=\'/order/list?currentPage='+ @{${selectCriteria.pageNo - 1}} + '\''"
                    th:disabled="${selectCriteria.pageNo == 1}"><</button>

            <th:block th:each="page : ${#numbers.sequence(selectCriteria.startPage, selectCriteria.endPage)}">
              <button class="btn btn-warning mx-1" disabled style="color:white"
                      th:text="${ page }"
                      th:onclick="'location.href=\'/order/list?currentPage='+ @{${page}} + '\''"
                      th:disabled="${ selectCriteria.pageNo eq page }">
              </button>
            </th:block>

            <button type="button" class="btn btn-light mx-1"
                    th:onclick="'location.href=\'/order/list?currentPage='+ @{${selectCriteria.pageNo + 1}} + '\''"
                    th:disabled="${selectCriteria.pageNo == selectCriteria.maxPage}"><</button>

            <button class="btn btn-light mx-1" id="idMaxPage"
                    th:onclick="'location.href=\'/order/list?currentPage='+ @{${selectCriteria.maxPage}} + '\'"
                    th:disabled="${selectCriteria.pageNo == selectCriteria.maxPage}">>></button>

          </div>
          -->
          <!-- E: paging -->
        </div>
      </div>
      <!-- E: main layout -->
    </div>

    <!-- E: container -->
  </div>
  <!-- table js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>

  <script type="text/javascript" th:src="@{/js/element.js}"></script>
  
  <!-- 입고 예정일 -->
  <script th:inline="javascript">
    let dueDateTest = document.getElementById("dueDate");
    function dueDate() {
      let date = new Date();
      let year = date.getFullYear();
      let month = date.getMonth();
      let clockDate = date.getDate();
      let day = date.getDay();
      let week = ['일', '월', '화', '수', '목', '금', '토'];

      dueDateTest.innerText = `${year}년 ${month+1}월 ${clockDate+1}일 ${week[day+1]}요일`;
    }
    dueDate();
  </script>

  <!-- 발주 마감일 -->
  <script th:inline="javascript">
    let deadlineTest = document.getElementById("deadline");
    function deadline() {
      let date = new Date();
      let year = date.getFullYear();
      let month = date.getMonth();
      let clockDate = date.getDate();
      let day = date.getDay();
      let week = ['일', '월', '화', '수', '목', '금', '토'];

      deadlineTest.innerText = `${year}년 ${month+1}월 ${clockDate}일 ${week[day]}요일 23시 59분 59초`;
    }

    deadline();
  </script>

  <!-- 현재 시각 -->
  <script th:inline="javascript">
    let clockTarget = document.getElementById("clock");
    function clock() {
      document.getElementById("clock").style.fontWeight="bold";
      let date = new Date();
      let year = date.getFullYear();
      let month = date.getMonth();
      let clockDate = date.getDate();
      let day = date.getDay();
      let week = ['일', '월', '화', '수', '목', '금', '토'];
      let hours = date.getHours();
      let minutes = date.getMinutes();
      let seconds = date.getSeconds();

      clockTarget.innerText = `${year}년 ${month+1}월 ${clockDate}일 ${week[day]}요일` +
      ` ${hours < 10 ? `0${hours}` : hours}시 ${minutes < 10 ? `0${minutes }` : minutes }분 ${seconds < 10 ? `0${seconds }` : seconds }초`;
}
    function init() {
      clock();
      setInterval(clock, 1000);
    }

    init();
  </script>

  <!-- 관심 설정 -->
  <script th:inline="javascript">
    function interest() {
        alert("해당 상품이 관심 목록에 추가 되었습니다.");
    }
  </script>

  <!-- 장바구니 담기 -->
  <script th:inline="javascript">
    function cartAlert() {
      let result = confirm("선택 제품이 장바구니에 담겼습니다.\n장바구니로 이동하시겠습니까?");
      if(result == true) {
        location = url;
      }
    }
  </script>

  <!-- 체크 박스 전체 선택 -->
  <script th:inline="javascript">
    function selectAll(selectAll)  {
        const checkboxes = document.getElementsByName('option');
    
        checkboxes.forEach((checkbox) => {
        checkbox.checked = selectAll.checked;
        })
    }
  </script>
</body>
</html>